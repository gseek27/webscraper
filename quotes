import urllib2
from bs4 import BeautifulSoup

import codecs
import csv
from datetime import datetime

web = 'http://quotes.toscrape.com/page/'

data = []

for i in range(1,11):
    site = str(web + str(i))
    print ''
    print site
    print ''
    page = urllib2.urlopen(site)
    soup = BeautifulSoup(page, "lxml")
    quo =  soup.find_all('span', attrs={'class': 'text'})
    auth = soup.find_all('small', attrs={'class': 'author'})
    for line in quo:
        quotes = line.text
        quote = quotes.encode("ascii", "ignore")
        print quote
        print ''
    print ''
    for line in auth:
        authors = line.text
        author = authors.encode("ascii", "ignore")
        print author
        print ''

    data.append((author, quote))

with open('index.csv', 'a') as csv_file:
    writer = csv.writer(csv_file)
    for author, quote in data:
        writer.writerow([author, quote, datetime.now()])
